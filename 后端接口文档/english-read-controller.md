# ArticleController 后端接口文档

## 概述

ArticleController是英语阅读模块的核心控制器，负责处理文章阅读、翻译、测试等相关功能。所有接口都需要用户认证（JWT Token）。

**基础信息：**
- 基础路径：`/read`
- 认证方式：JWT Token（通过请求头Authorization传递）
- 响应格式：统一返回`Result<T>`对象

## 接口列表

### 1. 获取阅读文章分类列表

**接口地址：** `GET /read/categories`

**功能描述：** 获取所有可用的文章分类列表

**请求参数：** 无

**响应数据：**
```json
{
  "code": 0,
  "msg": "获取阅读文章分类列表成功",
  "data": [
    {
      "id": 1,
      "name": "分类名称"
    }
  ]
}
```

**示例调用：**
```bash
# 使用curl命令调用
curl -X GET "http://localhost:8080/read/categories" \
  -H "Authorization: Bearer your_jwt_token_here"

# 或者使用JavaScript fetch
# fetch('/read/categories', {
#   method: 'GET',
#   headers: {
#     'Authorization': 'Bearer your_jwt_token_here'
#   }
# })
# .then(response => response.json())
# .then(data => console.log(data));
```

---

### 2. 根据分类ID获取文章列表

**接口地址：** `GET /read/articles`

**功能描述：** 根据分类ID获取该分类下的文章列表

**请求参数：**
| 参数名     | 类型 | 必填 | 说明       |
| ---------- | ---- | ---- | ---------- |
| categoryId | Long | 是   | 文章分类ID |

**响应数据：**
```json
{
  "code": 200,
  "message": "根据分类ID获取阅读文章列表成功",
  "data": [
    {
      "id": 1,
      "categoryId": 1,
      "author": "作者名",
      "title": "英文标题",
      "chineseTitle": "中文标题",
      "content": "文章内容",
      "imageUrl": "图片URL",
      "highlights": "重点高亮内容",
      "articleInsights": "文章感悟"
    }
  ]
}
```

**响应字段说明：**
- `id`: 文章ID
- `categoryId`: 分类ID
- `author`: 作者名
- `title`: 英文标题
- `chineseTitle`: 中文标题
- `content`: 文章内容（格式：每个小标题前加`##`，段落之间用`\n`分隔，句子之间用`&`分隔）
- `imageUrl`: 文章配图URL地址
- `highlights`: 文章重点单词和短语的高亮分析
- `articleInsights`: 文章感悟和学习要点

---

### 3. 获取文章翻译

**接口地址：** `GET /read/article/translation`

**功能描述：** 根据文章ID获取文章的翻译内容

**请求参数：**
| 参数名    | 类型 | 必填 | 说明   |
| --------- | ---- | ---- | ------ |
| articleId | Long | 是   | 文章ID |

**响应数据：**
```json
{
  "code": 0,
  "msg": "根据文章ID获取文章翻译成功",
  "data": "翻译内容"
}
```

**翻译格式说明：**
- 每个小标题前加`##`
- 段落之间用`\n`分隔
- 句子之间用`&`分隔

---

### 4. 句子分析

**接口地址：** `GET /read/sentence`

**功能描述：** 对输入的英文句子进行语法和语义分析

**请求参数：**
| 参数名   | 类型   | 必填 | 说明               |
| -------- | ------ | ---- | ------------------ |
| sentence | String | 是   | 需要分析的英文句子 |

**响应数据：**
```json
{
  "code": 0,
  "msg": "句子分析成功",
  "data": "分析结果"
}
```

---

### 5. 词汇短语汇总

**接口地址：** `GET /read/phrases`

**功能描述：** 对文章中的词汇和短语进行汇总（主要用于用户上传的文章）

**请求参数：**
| 参数名    | 类型 | 必填 | 说明   |
| --------- | ---- | ---- | ------ |
| articleId | Long | 是   | 文章ID |

**响应数据：**
```json
{
  "code": 0,
  "msg": "词汇短语汇总成功",
  "data": "汇总结果"
}
```

---

### 6. 获取阅读测试题

**接口地址：** `POST /read/test`

**功能描述：** 根据文章ID和难度级别生成阅读测试题

**请求参数：**
| 参数名     | 类型    | 必填 | 说明                               |
| ---------- | ------- | ---- | ---------------------------------- |
| articleId  | Long    | 是   | 文章ID                             |
| difficulty | Integer | 是   | 难度级别（1-简单，2-中等，3-困难） |

**响应数据：**
```json
{
  "code": 0,
  "msg": "阅读测试题成功",
  "data": "测试题内容"
}
```

---

### 7. 重新生成阅读测试题

**接口地址：** `POST /read/retest`

**功能描述：** 重新生成阅读测试题（与获取测试题接口类似，但会重新生成）

**请求参数：**
| 参数名     | 类型    | 必填 | 说明                               |
| ---------- | ------- | ---- | ---------------------------------- |
| articleId  | Long    | 是   | 文章ID                             |
| difficulty | Integer | 是   | 难度级别（1-简单，2-中等，3-困难） |

**响应数据：**
```json
{
  "code": 0,
  "msg": "重新生成阅读测试题成功",
  "data": "新的测试题内容"
}
```

---

### 8. 增加文章阅读时间

**接口地址：** `POST /read/readTime`

**功能描述：** 记录用户阅读文章的时间

**请求参数：**
| 参数名    | 类型    | 必填 | 说明                       |
| --------- | ------- | ---- | -------------------------- |
| articleId | Long    | 是   | 文章ID                     |
| readTime  | Integer | 是   | 阅读时间（秒），必须≥150秒 |

**响应数据：**
```json
{
  "code": 0,
  "msg": "增加文章阅读时间成功",
  "data": "增加文章阅读时间成功"
}
```

---

### 9. 更新阅读状态为阅读中

**接口地址：** `POST /read/reading`

**功能描述：** 将文章的阅读状态更新为"阅读中"

**请求参数：**
| 参数名    | 类型 | 必填 | 说明   |
| --------- | ---- | ---- | ------ |
| articleId | Long | 是   | 文章ID |

**响应数据：**
```json
{
  "code": 0,
  "msg": "更新阅读进度为阅读中成功",
  "data": "更新阅读进度为阅读中成功"
}
```

---

### 10. 完成文章阅读

**接口地址：** `POST /read/complete`

**功能描述：** 标记文章阅读完成（需要阅读时间超过2.5分钟）

**请求参数：**
| 参数名    | 类型 | 必填 | 说明   |
| --------- | ---- | ---- | ------ |
| articleId | Long | 是   | 文章ID |

**响应数据：**
```json
{
  "code": 0,
  "msg": "完成文章阅读",
  "data": "完成文章阅读"
}
```

---

### 11. 文章收藏

**接口地址：** `POST /read/collect`

**功能描述：** 收藏指定的文章

**请求参数：**
| 参数名    | 类型 | 必填 | 说明   |
| --------- | ---- | ---- | ------ |
| articleId | Long | 是   | 文章ID |

**响应数据：**
```json
{
  "code": 0,
  "msg": "文章收藏成功",
  "data": "文章收藏成功"
}
```

---

### 12. 取消文章收藏

**接口地址：** `DELETE /read/cancelCollect`

**功能描述：** 取消已收藏的文章

**请求参数：**
| 参数名    | 类型 | 必填 | 说明   |
| --------- | ---- | ---- | ------ |
| articleId | Long | 是   | 文章ID |

**响应数据：**
```json
{
  "code": 0,
  "msg": "取消文章收藏成功",
  "data": "取消文章收藏成功"
}
```

## 错误码说明

所有接口使用统一的错误码体系：
- `0`: 成功
- `401`: 未授权（UNAUTHORIZED）
- `500`: 业务异常（BUSINESS_ERROR）
- `501`: 验证异常（VALIDATION_ERROR）
- `600`: 系统异常（SYSTEM_ERROR）
- `601`: 数据库唯一冲突异常（DUPLICATE_KEY_ERROR）
- `602`: 请不要频繁发送验证码（EMAIL_SEND_TOO_FREQUENTLY）

## 注意事项

1. **认证要求**：所有接口都需要有效的JWT Token
2. **参数验证**：接口会对请求参数进行验证，请确保参数格式正确
3. **时间要求**：增加阅读时间接口要求阅读时间≥150秒
4. **完成阅读**：完成阅读需要阅读时间超过2.5分钟
5. **待完善功能**：词汇短语汇总功能目前标记为待完善状态

---
*文档最后更新时间：2026-02-14*
*文档维护者：谢光益*
*准确性检查时间：2026-02-14*
*最近修正内容：与代码完全对齐 - 统一响应格式(code:0,msg字段)、补充完整响应字段、修正参数类型、更新错误码体系*