# 翻译功能使用指南

## 功能概述

翻译助手是一个全局可用的侧边抽屉组件，提供快速的单词翻译和管理功能。

## 功能特性

### 1. 多种入口方式

- **悬浮按钮**：页面右下角的翻译按钮（绿色渐变）
- **快捷键**：`Ctrl/Cmd + Shift + T` 快速唤起翻译面板

### 2. 核心功能

#### 翻译功能
- 输入单词或短语进行翻译
- 显示音标和发音
- 多种释义展示（词性 + 释义）
- 例句展示（如有）
- 支持语音朗读

#### 单词管理
- 一键添加到单词本
- 选择目标单词本
- 自动匹配单词 ID

#### 历史记录
- 自动保存最近 50 条翻译记录
- 显示最近 5 条快速访问
- 支持重新翻译历史单词
- 支持删除单个记录
- 支持清空所有历史

### 3. 用户体验优化

- **实时反馈**：翻译过程显示加载状态
- **错误提示**：友好的错误信息展示
- **快速操作**：复制翻译结果到剪贴板
- **响应式设计**：适配桌面和移动端
- **流畅动画**：抽屉滑入滑出动画

## 使用方法

### 基本翻译流程

1. 点击右下角翻译按钮或按 `Ctrl+Shift+T`
2. 在输入框中输入要翻译的单词
3. 按回车或点击"翻译"按钮
4. 查看翻译结果

### 添加到单词本

1. 翻译单词后，点击"添加到单词本"按钮
2. 在弹出的对话框中选择目标单词本
3. 点击"确认添加"

### 使用历史记录

1. 在翻译面板底部查看"最近翻译"
2. 点击历史记录项快速重新翻译
3. 点击删除按钮移除单个记录
4. 点击"清空"按钮清除所有历史

## 技术实现

### 文件结构

```
src/
├── components/
│   └── TranslateDrawer.vue      # 翻译抽屉组件
├── composables/
│   └── useTranslate.ts          # 翻译逻辑 composable
├── api/
│   └── translate.ts             # 翻译 API 接口
└── types/
    └── translate.ts             # 翻译类型定义
```

### 核心组件

#### TranslateDrawer.vue
- 翻译界面的主组件
- 包含输入、结果展示、历史记录
- 集成单词本选择功能

#### useTranslate.ts
- 翻译状态管理
- 历史记录管理（localStorage）
- 翻译业务逻辑

#### translate.ts (API)
- 翻译接口封装
- 使用 matchWords 接口实现翻译
- 数据格式转换

### 数据流

```
用户输入 → useTranslate.translate()
         → translateText() API
         → matchWords() 后端接口
         → 格式转换
         → 更新 currentResult
         → 保存到历史记录
```

## 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl/Cmd + Shift + T` | 打开/关闭翻译面板 |
| `Enter` | 执行翻译 |
| `Esc` | 关闭对话框 |

## 样式特点

- **渐变色主题**：绿色到蓝色渐变（#84fab0 → #8fd3f4）
- **流畅动画**：抽屉滑入滑出、历史项悬停效果
- **响应式布局**：桌面端 400px 宽，移动端全屏
- **自定义滚动条**：美化的滚动条样式

## 注意事项

1. **历史记录限制**：最多保存 50 条记录
2. **本地存储**：历史记录存储在 localStorage 中
3. **发音功能**：依赖浏览器的 Web Speech API
4. **网络依赖**：翻译功能需要网络连接

## 未来扩展

- [ ] 支持中译英
- [ ] 支持句子翻译
- [ ] 添加词根词缀分析
- [ ] 支持离线词典
- [ ] 添加收藏功能
- [ ] 支持导出历史记录
- [ ] 集成更多词典源

## 故障排查

### 翻译失败
- 检查网络连接
- 确认后端 API 可用
- 查看浏览器控制台错误信息

### 发音不工作
- 确认浏览器支持 Web Speech API
- 检查浏览器权限设置
- 尝试使用 Chrome/Edge 浏览器

### 历史记录丢失
- 检查浏览器是否清除了 localStorage
- 确认没有使用无痕模式

## 相关文档

- [单词本 API 文档](./WORDBOOK_API_GUIDE.md)
- [用户认证文档](./USER_INFO_INTEGRATION.md)
