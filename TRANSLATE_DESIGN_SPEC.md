# 翻译功能设计规范

## 🎨 视觉设计

### 配色方案

```
主色调：
- 主色：#84fab0 → #8fd3f4 (绿蓝渐变)
- 辅助色：#f8fafc (背景灰)
- 文字色：#1f2937 (深灰)
- 次要文字：#6b7280 (中灰)
- 边框色：#e5e7eb (浅灰)

功能色：
- 成功：#67C23A
- 警告：#E6A23C
- 错误：#F56C6C
- 信息：#409EFF
```

### 组件尺寸

```
悬浮按钮：
- 尺寸：60px × 60px
- 圆角：50% (圆形)
- 位置：right: 30px, bottom: 110px
- 阴影：0 4px 15px rgba(132, 250, 176, 0.4)

抽屉面板：
- 宽度：400px (桌面) / 100% (移动)
- 高度：100vh
- 位置：fixed, right: 0, top: 0
- 阴影：-4px 0 20px rgba(0, 0, 0, 0.1)

输入框：
- 高度：40px
- 圆角：4px
- 边框：1px solid #dcdfe6

按钮：
- 高度：40px (默认) / 44px (大)
- 圆角：4px
- 内边距：0 24px
```

### 间距规范

```
页面边距：20px
卡片内边距：20px
元素间距：
- 小：8px
- 中：16px
- 大：24px
- 超大：30px
```

## 📐 布局结构

```
┌─────────────────────────────────────┐
│  Header (头部)                       │
│  - 标题 + 图标                       │
│  - 关闭按钮                          │
├─────────────────────────────────────┤
│  Input Section (输入区)              │
│  - 输入框                            │
│  - 语言切换按钮                      │
│  - 翻译按钮                          │
├─────────────────────────────────────┤
│  Result Section (结果区 - 可滚动)    │
│  ┌───────────────────────────────┐  │
│  │ Word Header                   │  │
│  │ - 单词 + 发音按钮             │  │
│  ├───────────────────────────────┤  │
│  │ Phonetic (音标)               │  │
│  ├───────────────────────────────┤  │
│  │ Translations (释义)           │  │
│  │ - 词性标签                    │  │
│  │ - 释义列表                    │  │
│  ├───────────────────────────────┤  │
│  │ Examples (例句)               │  │
│  │ - 英文例句                    │  │
│  │ - 中文翻译                    │  │
│  ├───────────────────────────────┤  │
│  │ Quick Actions (快速操作)      │  │
│  │ - 添加到单词本                │  │
│  │ - 复制                        │  │
│  └───────────────────────────────┘  │
├─────────────────────────────────────┤
│  History Section (历史记录)         │
│  - 标题 + 清空按钮                   │
│  - 历史列表 (最近5条)                │
└─────────────────────────────────────┘
```

## 🎭 交互设计

### 状态管理

```typescript
interface TranslateState {
  isOpen: boolean           // 抽屉是否打开
  isTranslating: boolean    // 是否正在翻译
  inputText: string         // 输入文本
  currentResult: TranslateResult | null  // 当前结果
  error: string             // 错误信息
  history: TranslateHistory[]  // 历史记录
}
```

### 交互流程

#### 1. 打开翻译
```
用户操作：
- 点击悬浮按钮
- 按 Ctrl/Cmd + Shift + T

系统响应：
- 抽屉从右侧滑入
- 输入框自动聚焦
- 显示历史记录（如有）
```

#### 2. 执行翻译
```
用户操作：
- 输入单词
- 按 Enter 或点击翻译按钮

系统响应：
- 显示加载状态
- 调用翻译 API
- 显示结果或错误
- 保存到历史记录
```

#### 3. 添加到单词本
```
用户操作：
- 点击"添加到单词本"按钮

系统响应：
- 弹出单词本选择对话框
- 加载用户的单词本列表
- 用户选择目标单词本
- 确认添加
- 显示成功提示
```

#### 4. 使用历史记录
```
用户操作：
- 点击历史记录项

系统响应：
- 填充输入框
- 自动执行翻译
- 显示结果
```

### 动画效果

```css
/* 抽屉滑入滑出 */
.drawer-slide-enter-active,
.drawer-slide-leave-active {
  transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

/* 结果淡入 */
.result-content {
  animation: fadeIn 0.3s ease;
}

/* 悬浮按钮悬停 */
.translate-fab:hover {
  transform: translateY(-3px) scale(1.05);
}

/* 历史项悬停 */
.history-item:hover {
  transform: translateX(-2px);
}
```

## 🔤 文案规范

### 按钮文案
- 主要操作：翻译、添加到单词本、确认添加
- 次要操作：取消、清空、复制
- 危险操作：删除

### 提示文案
- 成功：已复制到剪贴板、添加成功
- 错误：翻译失败，请稍后重试、未找到该单词
- 警告：请输入要翻译的内容
- 信息：已切换到英文翻译

### 占位符文案
- 输入框：输入单词或句子...
- 空状态：输入单词开始翻译
- 选择框：请选择单词本

## 📱 响应式设计

### 断点设置
```css
/* 移动端 */
@media (max-width: 768px) {
  .translate-drawer {
    width: 100%;
  }
  
  .translate-fab {
    width: 56px;
    height: 56px;
    bottom: 90px;
    right: 20px;
  }
}

/* 平板 */
@media (min-width: 769px) and (max-width: 1024px) {
  .translate-drawer {
    width: 360px;
  }
}

/* 桌面 */
@media (min-width: 1025px) {
  .translate-drawer {
    width: 400px;
  }
}
```

### 移动端优化
- 触摸友好的按钮尺寸（最小 44px）
- 简化的布局结构
- 优化的滚动体验
- 适配的字体大小

## ♿ 无障碍设计

### 键盘导航
- Tab 键切换焦点
- Enter 键执行操作
- Esc 键关闭对话框
- 方向键导航列表

### 语义化标签
```html
<nav aria-label="翻译导航">
<button aria-label="关闭翻译面板">
<input aria-label="输入要翻译的单词">
<section aria-label="翻译结果">
```

### 对比度
- 文字与背景对比度 ≥ 4.5:1
- 大文字对比度 ≥ 3:1
- 交互元素清晰可见

## 🎯 性能优化

### 加载优化
- 懒加载 Lottie 动画
- 按需加载单词本列表
- 历史记录分页加载

### 渲染优化
- 虚拟滚动（历史记录多时）
- 防抖输入（避免频繁请求）
- 缓存翻译结果

### 存储优化
- localStorage 限制 50 条历史
- 定期清理过期数据
- 压缩存储格式

## 🔐 安全考虑

### 输入验证
- 限制输入长度（最大 100 字符）
- 过滤特殊字符
- XSS 防护

### API 安全
- 请求频率限制
- Token 认证
- HTTPS 传输

## 📊 数据埋点

### 关键指标
- 翻译次数
- 添加到单词本次数
- 历史记录使用率
- 发音功能使用率
- 平均翻译时长

### 用户行为
- 打开方式（按钮/快捷键）
- 最常翻译的单词
- 使用时段分布
- 错误率统计

## 🧪 测试用例

### 功能测试
- [ ] 打开/关闭抽屉
- [ ] 输入单词并翻译
- [ ] 查看翻译结果
- [ ] 播放发音
- [ ] 复制结果
- [ ] 添加到单词本
- [ ] 查看历史记录
- [ ] 删除历史记录
- [ ] 清空历史记录
- [ ] 快捷键操作

### 边界测试
- [ ] 空输入
- [ ] 超长输入
- [ ] 特殊字符
- [ ] 网络错误
- [ ] API 超时
- [ ] 历史记录满载

### 兼容性测试
- [ ] Chrome
- [ ] Firefox
- [ ] Safari
- [ ] Edge
- [ ] 移动端浏览器

---

**设计版本**：v1.0.0
**最后更新**：2026-01-27
**设计师**：AI Assistant
